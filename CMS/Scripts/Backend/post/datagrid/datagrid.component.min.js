import templateUrl from"./datagrid.component.html";export default class{constructor(n,t,i,r,u,f){this.commonService=r;this.devextremeService=u;this.postService=f;this.datagrid={};n.showFilter=!1;this.datagrid=angular.extend(this.devextremeService.getDefaultGrid(),{onInitialized:n=>{this.gridInstance=n.component},bindingOptions:{"rowFilter.visible":"showFilter"},dataSource:this.postService.gets(),columns:[{caption:"ID",dataField:"Id",dataType:"number",sortOrder:"desc",width:60},{caption:"Trạng thái",dataField:"Published",dataType:"boolean",cellTemplate:"publishedCellTemplate",trueText:"Xuất bản",falseText:"Chưa xuất bản",width:100},{caption:"Tiêu đề",dataField:"Title",dataType:"string",minWidth:150},{caption:"Danh mục",dataField:"CategoryId",dataType:"number",lookup:{displayExpr:"Title",valueExpr:"Id"},width:150},{alignment:"left",caption:"Ngày tạo",dataField:"TimeCreated",dataType:"date",format:"dd/MM/yyyy",customizeText:function(n){return n.valueText},width:100},{alignment:"center",caption:"Lượt xem",dataField:"Views",dataType:"number",cellTemplate:"viewsCellTemplate",width:90},],summary:{texts:{count:"{0}"},totalItems:[{column:"Id",summaryType:"count"}]},rowFilter:{visible:this.showFilter},onToolbarPreparing:t=>{t.toolbarOptions.items.unshift({location:"before",widget:"dxButton",options:{hint:"Thêm",icon:"add",text:"Thêm mới",type:"success",onClick:()=>{this.onCreate()}},locateInMenu:"auto"},{location:"before",widget:"dxButton",options:{hint:"Xóa",icon:"trash",text:"Xóa",type:"danger",onClick:()=>{this.onDelete()}},locateInMenu:"auto"},{location:"after",widget:"dxButton",options:{hint:"Lọc dữ liệu",icon:"filter",type:this.showFilter?"success":"normal",onClick:()=>{setTimeout(()=>{n.showFilter=!n.showFilter,this.gridInstance.repaint()},0)}},locateInMenu:"auto"},{location:"after",widget:"dxButton",options:{hint:"Refresh",icon:"refresh",onClick:()=>{this.gridInstance.getDataSource().reload()}},locateInMenu:"auto"})},onRowDblClick:n=>{this.onEdit(n.data.Id)}})}onCreate(){console.log("Create")}onEdit(n){console.log("Edit",n)}onDelete(){console.log("Delete",this.gridInstance.getSelectedRowKeys())}};export const PostDatagridComponent={template:templateUrl,controller:PostDatagridController};